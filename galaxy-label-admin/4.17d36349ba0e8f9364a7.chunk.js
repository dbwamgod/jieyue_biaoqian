webpackJsonp([4],{264:function(e,a,t){"use strict";function i(e){c||(t(324),t(326))}Object.defineProperty(a,"__esModule",{value:!0});var s=t(280),o=t.n(s);for(var l in s)"default"!==l&&function(e){t.d(a,e,function(){return s[e]})}(l);var r=t(328),n=t.n(r),c=!1,d=t(0),p=i,g=d(o.a,n.a,!1,p,"data-v-75503505",null);g.options.__file="src\\views\\tabManagement\\tab_management.vue",a.default=g.exports},280:function(e,a,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var s=t(99),o=i(s),l=t(3);i(l);a.default={data:function(){var e=this;return{dataCount:0,page:{pageIndex:1,pageSize:10},modal1:!1,modal2:!1,labelname:"",queryLabelDataTypesList:[],categoryList:[],columns7:[{title:"序号",key:"id"},{title:"标签代码",key:"labelCode"},{title:"名称",key:"labelName"},{title:"字段类型",key:"dataType",render:function(a,t){return a("span",e.filterWordType(t.row.dataType))}},{title:"精度",key:"accuracy"},{title:"分类",key:"categoryId",render:function(a,t){return a("span",e.filterClassification(t.row.categoryId))}},{title:"操作",key:"action",width:200,align:"center",render:function(a,t){return a("div",[a("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.show(t.row)}}},"编辑"),a("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.modal2=!0,e.paramsRowId=t.row.id}}},"删除"),a("Button",{props:{type:0==t.row.available?"primary":"error",size:"small"},on:{click:function(){e.available(t.row.id,t.row.available)}}},0==t.row.available?"启用":"停用")])}}],data6:[],isEdit:"新建",ruleInline:{code:[{required:!0,message:"请输入分类代码",trigger:"blur"}],labelType:[{type:"number",required:!0,message:"请选择类型",trigger:"change"}],classification:[{type:"number",required:!0,message:"请选择分类",trigger:"change"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],processingRules:[{required:!0,message:"请输入规则",trigger:"blur"}],precision:[{pattern:/^[0-9]{0,5}$/,message:"请输入数字最多五位",trigger:"blur"}]},categoryDetails:{code:"",name:"",labelType:"",classification:"",processing:0,processingType:0,precision:"",processingRules:"",id:"",available:""}}},created:function(){var e=this;this.$axios.all([this.getCategoryListSecondary(),this.queryLabelDataTypes()]).then(this.$axios.spread(function(a,t){return e.init()}))},methods:{init:function(){var e=this;this.$axios({method:"post",url:o.default.queryLabels(),data:{form:{labelName:this.labelname},pageIndex:this.page.pageIndex,pageSize:this.page.pageSize}}).then(function(a){200==a.data.code?(e.data6=a.data.data,e.dataCount=a.data.page.totalRecords,0!=a.data.data.length&&a.data.data!=[]||0!=a.data.page.totalRecords&&(e.page.pageIndex=0!=e.page.pageIndex?e.page.pageIndex-1:e.page.pageIndex,e.init())):e.$Message.warning("网络请求错误！请刷新")},function(a){e.$Message.warning("服务器错误")})},searchChange:function(){this.init()},getCategoryListSecondary:function(){var e=this;return this.$axios({method:"post",url:o.default.queryLabelCategorysT(),data:{form:{categoryName:""},pageIndex:0,pageSize:0}}).then(function(a){200==a.data.code?e.categoryList=a.data.data:e.$Message.info({content:a.data.msg,duration:3})})},filterClassification:function(e){var a=this.categoryList.filter(function(a){return a.id===e})[0];return a?a.parentName+"-"+a.categoryName:"无类型"},filterWordType:function(e){var a=this.queryLabelDataTypesList.filter(function(a){return a.id===e})[0];return a?a.typeName:"无类型"},queryLabelDataTypes:function(){var e=this;return this.$axios({method:"get",url:o.default.queryLabelDataTypes()}).then(function(a){200==a.data.code?e.queryLabelDataTypesList=a.data.data:e.$Message.info({content:a.data.msg,duration:3})})},newCreate:function(){this.isEdit="新建",this.modal1=!0},show:function(e){var a=this,t=e;this.isEdit="编辑",this.modal1=!0,this.$axios({method:"get",url:o.default.queryLabelById(t.id)}).then(function(e){200==e.data.code?(a.categoryDetails.processingRules=e.data.data.rule,a.categoryDetails.code=t.labelCode,a.categoryDetails.name=t.labelName,a.categoryDetails.labelType=t.dataType,a.categoryDetails.classification="无类型"==a.filterClassification(t.categoryId)?"":t.categoryId,a.categoryDetails.processing=t.oneTime,a.categoryDetails.processingType=t.processType,a.categoryDetails.precision=t.accuracy,a.categoryDetails.id=t.id,a.categoryDetails.available=t.available):a.$Message.error({content:e.data.msg,duration:3})})},remove:function(e,a){var t=this;this.$axios({method:"post",url:o.default.removeLabelByIds(),data:{datas:[e]}}).then(function(e){200==e.data.code?(t.init(),t.$Message.success({content:"删除成功",duration:3})):t.$Message.error({content:e.data.msg,duration:3})})},available:function(e,a){var t=this;this.$axios({method:"post",url:o.default.changeLabelAvailable(),data:{id:e,available:Number(!a)}}).then(function(e){200==e.data.code?(t.init(),t.$Message.success({content:"操作成功",duration:3})):t.$Message.error({content:e.data.msg,duration:3})})},changepage:function(e){this.page.pageIndex=e,this.init()},ok:function(){var e=this;this.$refs.formInline.validate(function(a){a&&(e.categoryDetails.precision=3==e.categoryDetails.labelType?e.categoryDetails.precision:"","新建"==e.isEdit?e.$axios({method:"post",url:o.default.saveLabel(),data:{accuracy:Number(e.categoryDetails.precision),categoryId:e.categoryDetails.classification,dataType:e.categoryDetails.labelType,labelCode:e.categoryDetails.code.replace(/(^\s+)|(\s+$)|\s+/g,""),labelName:e.categoryDetails.name.replace(/(^\s+)|(\s+$)|\s+/g,""),processType:e.categoryDetails.processingType,rule:e.categoryDetails.processingRules,oneTime:e.categoryDetails.processing}}).then(function(a){200==a.data.code?(e.cancel(),e.init(),e.$Message.success("创建成功")):e.$Message.info({content:a.data.msg,duration:3})},function(a){e.$Message.info({content:"服务器错误",duration:3})}):e.$axios({method:"post",url:o.default.updateLabelConfigById(),data:{accuracy:Number(e.categoryDetails.precision),categoryId:e.categoryDetails.classification,dataType:e.categoryDetails.labelType,labelCode:e.categoryDetails.code,labelName:e.categoryDetails.name,processType:e.categoryDetails.processingType,rule:e.categoryDetails.processingRules,oneTime:e.categoryDetails.processing,id:e.categoryDetails.id}}).then(function(a){200==a.data.code?(e.cancel(),e.init(),e.$Message.success("修改成功")):e.$Message.info({content:a.data.msg,duration:3})},function(a){e.$Message.info({content:"服务器错误",duration:3})}))})},cancel:function(){this.modal1=!1,this.$refs.formInline.resetFields(),this.categoryDetails={code:"",name:"",labelType:"",classification:"",processing:0,processingType:0,precision:""}},okDelete:function(){this.remove(this.paramsRowId,"")},cancel2:function(){this.modal2=!1}}}},324:function(e,a,t){var i=t(325);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(9)("2e0c5b04",i,!1)},325:function(e,a,t){a=e.exports=t(8)(!1),a.push([e.i,"\n.paging[data-v-75503505] {\r\n  float: right;\r\n  margin-top: 10px;\n}\r\n",""])},326:function(e,a,t){var i=t(327);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(9)("332b6bbf",i,!1)},327:function(e,a,t){a=e.exports=t(8)(!1),a.push([e.i,"\n.tab_man_textarea textarea[data-v-75503505] {\r\n  resize: vertical;\n}\r\n",""])},328:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticStyle:{position:"relative",height:"100%",padding:"10px"}},[t("Row",{staticClass:"code-row-bg",staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("Col",{attrs:{span:"6"}},[t("h2",{staticStyle:{margin:"6px 0 0 20px"}},[e._v("分类列表")])]),e._v(" "),t("Col",{staticStyle:{"text-align":"right","margin-right":"5px"},attrs:{span:"6"}},[t("Button",{staticStyle:{},attrs:{type:"primary"},on:{click:e.newCreate}},[e._v("新建")]),e._v(" "),t("Input",{staticStyle:{width:"160px"},attrs:{icon:"ios-search",search:"",placeholder:"请搜索..."},on:{"on-change":e.searchChange},model:{value:e.labelname,callback:function(a){e.labelname=a},expression:"labelname"}})],1)],1),e._v(" "),t("Table",{attrs:{border:"",columns:e.columns7,data:e.data6}}),e._v(" "),t("Page",{staticClass:"paging",attrs:{total:e.dataCount,"show-total":"","page-size":e.page.pageSize,current:e.page.pageIndex},on:{"on-change":e.changepage}}),e._v(" "),t("Modal",{attrs:{title:e.isEdit,closable:!1,"footer-hide":!0},on:{"on-cancel":e.cancel},model:{value:e.modal1,callback:function(a){e.modal1=a},expression:"modal1"}},[t("Form",{ref:"formInline",attrs:{model:e.categoryDetails,rules:e.ruleInline,inline:""}},[t("FormItem",{attrs:{prop:"code",label:"代码：","label-position":"right","label-width":100}},[t("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入代码"},model:{value:e.categoryDetails.code,callback:function(a){e.$set(e.categoryDetails,"code",a)},expression:"categoryDetails.code"}})],1),e._v(" "),t("FormItem",{attrs:{prop:"name",label:"名称：","label-position":"right","label-width":100}},[t("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入名称"},model:{value:e.categoryDetails.name,callback:function(a){e.$set(e.categoryDetails,"name",a)},expression:"categoryDetails.name"}})],1),e._v(" "),t("FormItem",{attrs:{prop:"labelType",label:"类型：","label-position":"right","label-width":100}},[t("Select",{staticStyle:{width:"300px"},model:{value:e.categoryDetails.labelType,callback:function(a){e.$set(e.categoryDetails,"labelType",a)},expression:"categoryDetails.labelType"}},e._l(e.queryLabelDataTypesList,function(a){return t("Option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.typeName))])}))],1),e._v(" "),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:3==e.categoryDetails.labelType,expression:"categoryDetails.labelType==3"}],attrs:{prop:"precision",label:"精度：","label-position":"right","label-width":100}},[t("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入名称"},model:{value:e.categoryDetails.precision,callback:function(a){e.$set(e.categoryDetails,"precision",a)},expression:"categoryDetails.precision"}})],1),e._v(" "),t("FormItem",{attrs:{prop:"classification",label:"分类：",placeholder:"请选择","label-position":"right","label-width":100}},[t("Select",{staticStyle:{width:"300px"},model:{value:e.categoryDetails.classification,callback:function(a){e.$set(e.categoryDetails,"classification",a)},expression:"categoryDetails.classification"}},e._l(e.categoryList,function(a){return t("Option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.parentName+"-"+a.categoryName))])}))],1),e._v(" "),t("FormItem",{attrs:{prop:"processing",label:"重复加工：","label-position":"right","label-width":100}},[t("RadioGroup",{staticStyle:{width:"300px"},model:{value:e.categoryDetails.processing,callback:function(a){e.$set(e.categoryDetails,"processing",a)},expression:"categoryDetails.processing"}},[t("Radio",{attrs:{label:"0"}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"1"}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{prop:"processingType",label:"加工类型：","label-position":"right","label-width":100}},[t("RadioGroup",{staticStyle:{width:"300px"},model:{value:e.categoryDetails.processingType,callback:function(a){e.$set(e.categoryDetails,"processingType",a)},expression:"categoryDetails.processingType"}},[t("Radio",{attrs:{label:"0"}},[e._v("sql")]),e._v(" "),t("Radio",{attrs:{label:"1"}},[e._v("el")])],1)],1),e._v(" "),t("FormItem",{attrs:{prop:"processingRules",label:"加工规则：","label-position":"right","label-width":100}},[t("Input",{staticClass:"tab_man_textarea",staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入规则..."},model:{value:e.categoryDetails.processingRules,callback:function(a){e.$set(e.categoryDetails,"processingRules",a)},expression:"categoryDetails.processingRules"}})],1)],1),e._v(" "),t("div",{staticStyle:{"text-align":"right"}},[t("Button",{staticStyle:{"margin-right":"10px"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),t("Button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确定")])],1)],1),e._v(" "),t("Modal",{attrs:{title:"删除分类",closable:!1},on:{"on-ok":e.okDelete,"on-cancel":e.cancel2},model:{value:e.modal2,callback:function(a){e.modal2=a},expression:"modal2"}},[t("p",[e._v("确定要删除此分类么？")])])],1)},s=[];i._withStripped=!0;var o={render:i,staticRenderFns:s};a.default=o}});